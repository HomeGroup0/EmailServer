"use strict";(self.webpackChunksnoop_jake_front_end_docs=self.webpackChunksnoop_jake_front_end_docs||[]).push([[2356],{3809:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>u,frontMatter:()=>o,metadata:()=>i,toc:()=>l});var r=t(4848),s=t(8453);const o={sidebar_position:1},a="The Code!",i={id:"EmailListDocs/code",title:"The Code!",description:"",source:"@site/docs/EmailListDocs/code.md",sourceDirName:"EmailListDocs",slug:"/EmailListDocs/code",permalink:"/EmailServer/EmailFrontend/SnoopJakeFrontEndDocs/docs/EmailListDocs/code",draft:!1,unlisted:!1,editUrl:"https://github.com/Tech-Fellows-SnoopJake/EmailServer/tree/jfra_frontend_branch/EmailFrontend/SnoopJakeFrontEndDocs/docs/EmailListDocs/code.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1},sidebar:"docsSidebar",previous:{title:"Component-EmailList",permalink:"/EmailServer/EmailFrontend/SnoopJakeFrontEndDocs/docs/category/component-emaillist"},next:{title:"Author's Explanation",permalink:"/EmailServer/EmailFrontend/SnoopJakeFrontEndDocs/docs/EmailListDocs/author_comments"}},c={},l=[];function d(e){const n={code:"code",h1:"h1",pre:"pre",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h1,{id:"the-code",children:"The Code!"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"// EmailFrontend/src/components/EmailList/EmailList.tsx\n\nimport React, { useState } from 'react';\nimport ReactQuill from 'react-quill';\nimport 'react-quill/dist/quill.snow.css'; \nimport axios from 'axios';\n\nfunction getErrorMessage(status: number): string {\n  switch (status) {\n    case 400:\n      return 'The request was invalid. Please check your input. CLICK HERE TO DISMISS THIS MESSAGE';\n    case 401:\n      return 'You are not authorized to send this email. CLICK HERE TO DISMISS THIS MESSAGE';\n    case 403:\n      return 'Access is forbidden. Please check your permissions. CLICK HERE TO DISMISS THIS MESSAGE';\n    case 404:\n      return 'The email service was not found. CLICK HERE TO DISMISS THIS MESSAGE';\n    case 500:\n      return 'An internal server error occurred. Please try again later. CLICK HERE TO DISMISS THIS MESSAGE';\n    default:\n      return 'An unknown error occurred. Please try again. CLICK HERE TO DISMISS THIS MESSAGE';\n  }\n}\n\n\nconst ComposeEmail: React.FC = () => {\n  const [receiver, setReceiver] = useState('');\n  const [subject, setSubject] = useState('');\n  const [body, setBody] = useState('');\n  const [message, setMessage] = useState<{ text: string; type: 'error' | 'success' } | null>(null);\n\n  // Utility function to show message and fade it out after 5 seconds\n  const showMessage = (text: string, type: 'error' | 'success') => {\n    setMessage({ text, type });\n  };\n\n  const handleSubmit = async (event: React.FormEvent<HTMLFormElement>) => {\n    event.preventDefault();\n\n    const apiUrl = 'http://127.0.0.1:8000/emails/'; // \n    const emailData = { receiver, subject, body, 'sender':'julian@snoopjake.com', 'user':3 };\n\n    try {\n      console.log(emailData);\n      const response = await axios.post(apiUrl, emailData, {\n        headers: {\n          'Content-Type': 'application/json',\n          // 'Authorization': 'Bearer YOUR_TOKEN_HERE', \n        },\n      });\n\n      // Check for non-2xx status codes\n      if (response.status === 200) {\n        showMessage('Email sent successfully!', 'success');\n        // Reset form fields\n        setReceiver('');\n        setSubject('');\n        setBody('');\n      } else {\n        showMessage(getErrorMessage(response.status), 'error');\n      }\n    } catch (error) {\n      if (axios.isAxiosError(error) && error.response) {\n        // If error has a response property, it's an HTTP error\n        showMessage(getErrorMessage(error.response.status), 'error');\n      } else {\n        // Otherwise, it's a network error or other issue\n        showMessage('A network error occurred... It\\'s either our server or your internet! Please try again later or check your internet connection.', 'error');\n      }\n    }\n  };\n\n  return (\n    <div className=\"compose-email p-4 flex flex-col h-full\">\n      {message && (\n        <div className={`message p-4 mb-4 rounded-md cursor-pointer ${message.type === 'success' ? 'bg-green-100 border border-green-400 text-green-700' : 'bg-red-100 border border-red-400 text-red-700'}`} onClick={() => setMessage(null)}>\n  {message.text}\n        </div>\n      )}\n      <form className=\"flex flex-col h-5/6\" onSubmit={handleSubmit}>\n        <input\n          type=\"email\"\n          value={receiver}\n          onChange={(e) => setReceiver(e.target.value)}\n          className=\"mb-4 px-2 h-10  border border-gray-300 rounded\"\n          placeholder=\"To\"\n          required\n        />\n        <input\n          type=\"text\"\n          value={subject}\n          onChange={(e) => setSubject(e.target.value)}\n          className=\"mb-4 px-2 h-10 border border-gray-300 rounded\"\n          placeholder=\"Subject\"\n          required\n        />\n        <ReactQuill\n          value={body}\n          onChange={setBody}\n          className=\"flex-grow min-h-[200px] max-h-[445px] overflow-y-auto\"\n          placeholder=\"Body\"\n          modules={{\n            toolbar: [\n              ['bold', 'italic', 'underline'],\n              [{ 'list': 'ordered'}, {'list': 'bullet' }],\n              ['clean']\n            ]\n          }}\n        />\n        <button className=\"px-4 py-2 bg-[#274073] text-white rounded cursor-pointer hover:bg-[#1a2d50]\" type=\"submit\">Send</button>\n      </form>\n    </div>\n  );\n};\n\nexport default ComposeEmail;\n\n"})})]})}function u(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>a,x:()=>i});var r=t(6540);const s={},o=r.createContext(s);function a(e){const n=r.useContext(o);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),r.createElement(o.Provider,{value:n},e.children)}}}]);